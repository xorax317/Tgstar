<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Telegram Mining Star</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* Base Styles */
    html, body {
      width: 100%;
      height: 100vh;
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(120deg, #1e3c72, #2a5298);
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
    }

    /* Login Box */
    .login-box {
      background: rgba(255, 255, 255, 0.1);
      padding: 30px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
      text-align: center;
      max-width: 400px;
      width: 100%;
      box-sizing: border-box;
      animation: fadeIn 1s ease-in-out;
    }

    /* SVG Container */
    .svgContainer {
      position: relative;
      width: 180px;
      height: 180px;
      margin: 0 auto 1em;
      border-radius: 50%;
      pointer-events: none;
    }
    .svgContainer div {
      position: relative;
      width: 100%;
      padding-bottom: 100%;
      height: 0;
      overflow: hidden;
      border-radius: 50%;
    }
    .svgContainer .mySVG {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .svgContainer::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 2px solid #00c6ff;
      border-radius: 50%;
      box-sizing: border-box;
    }

    /* Form Elements */
    .inputGroup {
      margin-bottom: 1.5em;
      position: relative;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-size: 1.25em;
      color: #fff;
      font-weight: 600;
    }
    input[type="email"],
    input[type="password"],
    input[type="text"] {
      width: 90%;
      padding: 12px;
      margin: 10px auto;
      border: none;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.2);
      color: #fff;
      font-size: 1.2em;
      font-weight: 400;
      transition: box-shadow 0.2s linear, background 0.2s ease-out;
    }
    input::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }
    input:focus {
      outline: none;
      background: rgba(255, 255, 255, 0.3);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    /* Error Message */
    .error-message {
      color: #ff6b6b;
      font-size: 0.9em;
      margin: 5px 0;
      display: none;
    }

    /* Buttons */
    button {
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 8px;
      background-color: #00c6ff;
      color: white;
      font-weight: 600;
      font-size: 1.2em;
      cursor: pointer;
      transition: background-color 0.3s ease-out;
    }
    button:hover {
      background-color: #0072ff;
    }

    /* Helper Text */
    .inputGroup1 .helper {
      position: absolute;
      top: 0;
      left: 5%;
      transform: translate(0.5em, 2.2em) scale(1);
      transform-origin: 0 0;
      color: rgba(255, 255, 255, 0.7);
      font-size: 1.2em;
      font-weight: 400;
      opacity: 0.65;
      pointer-events: none;
      transition: transform 0.2s ease-out, opacity 0.2s linear;
    }
    .inputGroup1.focusWithText .helper {
      transform: translate(0.5em, 1.55em) scale(0.6);
      opacity: 1;
    }

    /* Password Toggle Checkbox */
    .inputGroup2 #showPasswordToggle {
      position: absolute;
      top: 0.25em;
      right: 5%;
      padding: 0 0 0 1.45em;
      font-size: 1em;
      color: #fff;
      cursor: pointer;
    }
    .inputGroup2 #showPasswordToggle input {
      position: absolute;
      opacity: 0;
      z-index: -1;
    }
    .inputGroup2 #showPasswordToggle .indicator {
      position: absolute;
      top: 0;
      left: 0;
      width: 0.85em;
      height: 0.85em;
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid #00c6ff;
      border-radius: 3px;
    }
    .inputGroup2 #showPasswordToggle .indicator::after {
      content: "";
      position: absolute;
      left: 0.25em;
      top: 0.025em;
      width: 0.2em;
      height: 0.5em;
      border: solid #00c6ff;
      border-width: 0 3px 3px 0;
      transform: rotate(45deg);
      visibility: hidden;
    }
    .inputGroup2 #showPasswordToggle input:checked ~ .indicator::after {
      visibility: visible;
    }
    .inputGroup2 #showPasswordToggle input:focus ~ .indicator,
    .inputGroup2 #showPasswordToggle input:hover ~ .indicator {
      border-color: #0072ff;
    }
    .inputGroup2 #showPasswordToggle input:disabled ~ .indicator {
      opacity: 0.5;
    }
    .inputGroup2 #showPasswordToggle input:disabled ~ .indicator::after {
      visibility: hidden;
    }

    /* Animation */
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
  </style>
</head>
<body>
  <div class="login-box">
    <h2>Login or Register</h2>
    <!-- SVG Container for Yeti Character -->
    <div class="svgContainer">
      <div>
        <svg class="mySVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
          <circle cx="100" cy="100" r="100" fill="#2a5298"/>
          <g class="body">
            <path class="bodyBGnormal" stroke="#1e3c72" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="#ffffff" d="M200,158.5c0-20.2-14.8-36.5-35-36.5h-14.9V72.8c0-27.4-21.7-50.4-49.1-50.8c-28-0.5-50.9,22.1-50.9,50v50 H35.8C16,122,0,138,0,157.8L0,213h200L200,158.5z"/>
            <path fill="#e6f3ff" d="M100,156.4c-22.9,0-43,11.1-54.1,27.7c15.6,10,34.2,15.9,54.1,15.9s38.5-5.8,54.1-15.9 C143,167.5,122.9,156.4,100,156.4z"/>
          </g>
          <g class="earL">
            <circle cx="47" cy="83" r="11.5" fill="#e6f3ff" stroke="#1e3c72" stroke-width="2.5"/>
          </g>
          <g class="earR">
            <circle cx="153" cy="83" r="11.5" fill="#e6f3ff" stroke="#1e3c72" stroke-width="2.5"/>
          </g>
          <path class="chin" d="M84.1 121.6c2.7 2.9 6.1 5.4 9.8 7.5l.9-4.5c2.9 2.5 6.3 4.8 10.2 6.5 0-1.9-.1-3.9-.2-5.8 3 1.2 6.2 2 9.7 2.5-.3-2.1-.7-4.1-1.2-6.1" fill="none" stroke="#1e3c72" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path class="face" fill="#e6f3ff" d="M134.5,46v35.5c0,21.815-15.446,39.5-34.5,39.5s-34.5-17.685-34.5-39.5V46"/>
          <path class="hair" fill="#ffffff" stroke="#1e3c72" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" d="M81.457,27.929 c1.755-4.084,5.51-8.262,11.253-11.77c0.979,2.565,1.883,5.14,2.712,7.723c3.162-4.265,8.626-8.27,16.272-11.235 c-0.737,3.293-1.588,6.573-2.554,9.837c4.857-2.116,11.049-3.64,18.428-4.156c-2.403,3.23-5.021,6.391-7.852,9.474"/>
          <g class="eyebrow">
            <path fill="#ffffff" stroke="#1e3c72" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" d="M63.56,55.102 c6.243,5.624,13.38,10.614,21.296,14.738c2.071-2.785,4.01-5.626,5.816-8.515c4.537,3.785,9.583,7.263,15.097,10.329 c1.197-3.043,2.287-6.104,3.267-9.179c4.087,2.004,8.427,3.761,12.996,5.226c0.545-3.348,0.986-6.696,1.322-10.037 c4.913-0.481,9.857-1.34,14.787-2.599"/>
          </g>
          <g class="eyeL">
            <circle cx="85.5" cy="78.5" r="3.5" fill="#1e3c72"/>
            <circle cx="84" cy="76" r="1" fill="#fff"/>
          </g>
          <g class="eyeR">
            <circle cx="114.5" cy="78.5" r="3.5" fill="#1e3c72"/>
            <circle cx="113" cy="76" r="1" fill="#fff"/>
          </g>
          <g class="mouth">
            <path class="mouthBG" fill="#1e3c72" d="M100,101c-5,0-9-2-9-4.5s4-4.5,9-4.5,9,2,9,4.5-4,4.5-9,4.5z"/>
          </g>
          <path class="nose" d="M97.7 79.9h4.7c1.9 0 3 2.2 1.9 3.7l-2.3 3.3c-.9 1.3-2.9 1.3-3.8 0l-2.3-3.3c-1.3-1.6-.2-3.7 1.8-3.7z" fill="#1e3c72"/>
          <g class="arms">
            <g class="armL" style="visibility: hidden;">
              <polygon fill="#e6f3ff" stroke="#1e3c72" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" points="121.3,98.4 111,59.7 149.8,49.3 169.8,85.4"/>
              <g class="twoFingers">
                <path fill="#e6f3ff" stroke="#1e3c72" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" d="M158.3,67.8l23.1-6.2c2.7-0.7,5.4,0.9,6.1,3.5v0c0.7,2.7-0.9,5.4-3.5,6.1l-23.1,6.2"/>
                <path fill="#2a5298" d="M180.1,65l2.2-0.6c1.1-0.3,2.2,0.3,2.4,1.4v0c0.3,1.1-0.3,2.2-1.4,2.4l-2.2,0.6L180.1,65z"/>
              </g>
            </g>
            <g class="armR" style="visibility: hidden;">
              <polygon fill="#e6f3ff" stroke="#1e3c72" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" points="78.7,98.4 89,59.7 50.2,49.3 30.2,85.4"/>
              <g class="twoFingers">
                <path fill="#e6f3ff" stroke="#1e3c72" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" d="M41.7,67.8l-23.1-6.2c-2.7-0.7-5.4,0.9-6.1,3.5v0c-0.7,2.7,0.9,5.4,3.5,6.1l23.1,6.2"/>
                <path fill="#2a5298" d="M19.9,65l-2.2-0.6c-1.1-.3-2.2,0.3-2.4,1.4v0c-0.3,1.1,0.3,2.2,1.4,2.4l2.2,0.6L19.9,65z"/>
              </g>
            </g>
          </g>
        </svg>
      </div>
    </div>

    <!-- Email Input -->
    <div class="inputGroup inputGroup1">
      <label for="email" id="emailLabel">Email</label>
      <input type="email" id="email" maxlength="254" placeholder="Email" required />
      <p class="helper helper1">email@domain.com</p>
    </div>

    <!-- Password Input -->
    <div class="inputGroup inputGroup2">
      <label for="password" id="passwordLabel">Password</label>
      <input type="password" id="password" placeholder="Password" required />
      <label id="showPasswordToggle" for="showPasswordCheck">Show
        <input id="showPasswordCheck" type="checkbox"/>
        <div class="indicator"></div>
      </label>
      <p class="error-message" id="errorMessage"></p>
    </div>

    <!-- Buttons -->
    <div class="inputGroup inputGroup3">
      <button onclick="login()" aria-label="Log in">Login</button>
      <button onclick="register()" aria-label="Register">Register</button>
    </div>
  </div>

  <!-- External Libraries -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>

  <script>
    // Firebase Configuration and Initialization
    const firebaseConfig = {
      apiKey: "AIzaSyBSTtq5pB7AAWlFAl-5D0Te1_dN5vP_kVI",
      authDomain: "adimn-user.firebaseapp.com",
      projectId: "adimn-user",
      storageBucket: "chatexample-fd9e6.appspot.com",
      messagingSenderId: "1003269507396",
      appId: "1:1003269507396:web:c5004b818985b1c2faef11",
      measurementId: "G-K1Y2VEP13H"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Firebase Login Function
    function login() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const errorMessage = document.getElementById('errorMessage');
      errorMessage.style.display = 'none';

      auth.signInWithEmailAndPassword(email, password)
        .then(() => {
          window.location.href = 'dashboard.html';
        })
        .catch(err => {
          errorMessage.textContent = err.message;
          errorMessage.style.display = 'block';
        });
    }

    // Firebase Register Function
    function register() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const errorMessage = document.getElementById('errorMessage');
      errorMessage.style.display = 'none';

      auth.createUserWithEmailAndPassword(email, password)
        .then((userCred) => {
          const uid = userCred.user.uid;
          db.collection("users").doc(uid).set({
            email: email,
            stars: 5
          }).then(() => {
            window.location.href = 'dashboard.html';
          });
        })
        .catch(err => {
          errorMessage.textContent = err.message;
          errorMessage.style.display = 'block';
        });
    }

    // Yeti Animation Logic
    const elements = {
      emailLabel: document.querySelector('#emailLabel'),
      email: document.querySelector('#email'),
      passwordLabel: document.querySelector('#passwordLabel'),
      password: document.querySelector('#password'),
      showPasswordCheck: document.querySelector('#showPasswordCheck'),
      showPasswordToggle: document.querySelector('#showPasswordToggle'),
      mySVG: document.querySelector('.svgContainer'),
      twoFingers: document.querySelectorAll('.twoFingers'),
      armL: document.querySelector('.armL'),
      armR: document.querySelector('.armR'),
      eyeL: document.querySelector('.eyeL'),
      eyeR: document.querySelector('.eyeR'),
      nose: document.querySelector('.nose'),
      mouth: document.querySelector('.mouth'),
      mouthBG: document.querySelector('.mouthBG'),
      chin: document.querySelector('.chin'),
      face: document.querySelector('.face'),
      eyebrow: document.querySelector('.eyebrow'),
      hair: document.querySelector('.hair'),
      bodyBG: document.querySelector('.bodyBGnormal')
    };

    let activeElement = null;
    let curEmailIndex = 0;
    let screenCenter, svgCoords, emailCoords, emailScrollMax;
    let eyeLCoords, eyeRCoords, noseCoords, mouthCoords;
    let eyeLAngle, eyeLX, eyeLY, eyeRAngle, eyeRX, eyeRY;
    let noseAngle, noseX, noseY, mouthAngle, mouthX, mouthY, mouthR;
    let chinX, chinY, chinS, faceX, faceY, faceSkew, eyebrowSkew;
    let hairX, hairS;
    let mouthStatus = "small";
    let blinking = null;
    let eyeScale = 1;
    let eyesCovered = false;
    let showPasswordClicked = false;
    const chinMin = 0.5;

    function calculateFaceMove(e) {
      const email = elements.email;
      let carPos = email.selectionEnd || email.value.length;
      const div = document.createElement('div');
      const span = document.createElement('span');
      const copyStyle = getComputedStyle(email);

      for (const prop of copyStyle) {
        div.style[prop] = copyStyle[prop];
      }
      div.style.position = 'absolute';
      document.body.appendChild(div);
      div.textContent = email.value.substr(0, carPos);
      span.textContent = email.value.substr(carPos) || '.';
      div.appendChild(span);

      const caretCoords = getPosition(span);
      const dFromC = email.scrollWidth <= emailScrollMax
        ? screenCenter - (caretCoords.x + emailCoords.x)
        : screenCenter - (emailCoords.x + emailScrollMax);

      eyeLAngle = getAngle(eyeLCoords.x, eyeLCoords.y, emailCoords.x + (email.scrollWidth <= emailScrollMax ? caretCoords.x : emailScrollMax), emailCoords.y + 15);
      eyeRAngle = getAngle(eyeRCoords.x, eyeRCoords.y, emailCoords.x + (email.scrollWidth <= emailScrollMax ? caretCoords.x : emailScrollMax), emailCoords.y + 15);
      noseAngle = getAngle(noseCoords.x, noseCoords.y, emailCoords.x + (email.scrollWidth <= emailScrollMax ? caretCoords.x : emailScrollMax), emailCoords.y + 15);
      mouthAngle = getAngle(mouthCoords.x, mouthCoords.y, emailCoords.x + (email.scrollWidth <= emailScrollMax ? caretCoords.x : emailScrollMax), emailCoords.y + 15);

      eyeLX = Math.cos(eyeLAngle) * 10;
      eyeLY = Math.sin(eyeLAngle) * 5;
      eyeRX = Math.cos(eyeRAngle) * 10;
      eyeRY = Math.sin(eyeRAngle) * 5;
      noseX = Math.cos(noseAngle) * 10;
      noseY = Math.sin(noseAngle) * 5;
      mouthX = Math.cos(mouthAngle) * 10;
      mouthY = Math.sin(mouthAngle) * 5;
      mouthR = Math.cos(mouthAngle) * 3;
      chinX = mouthX * 0.6;
      chinY = mouthY * 0.4;
      chinS = Math.max(chinMin, 1 - ((dFromC * 0.1) / 100));
      faceX = mouthX * 0.2;
      faceY = mouthY * 0.3;
      faceSkew = Math.cos(mouthAngle) * 3;
      eyebrowSkew = Math.cos(mouthAngle) * 15;
      hairX = Math.cos(mouthAngle) * 4;
      hairS = 1.1;

      TweenMax.to(elements.eyeL, 0.5, { x: -eyeLX, y: -eyeLY, ease: Power2.easeOut });
      TweenMax.to(elements.eyeR, 0.5, { x: -eyeRX, y: -eyeRY, ease: Power2.easeOut });
      TweenMax.to(elements.nose, 0.5, { x: -noseX, y: -noseY, rotation: mouthR, transformOrigin: "center center", ease: Power2.easeOut });
      TweenMax.to(elements.mouth, 0.5, { x: -mouthX, y: -mouthY, rotation: mouthR, transformOrigin: "center center", ease: Power2.easeOut });
      TweenMax.to(elements.chin, 0.5, { x: -chinX, y: -chinY, scaleY: chinS, ease: Power2.easeOut });
      TweenMax.to(elements.face, 0.5, { x: -faceX, y: -faceY, skewX: -faceSkew, transformOrigin: "center top", ease: Power2.easeOut });
      TweenMax.to(elements.eyebrow, 0.5, { x: -faceX, y: -faceY, skewX: -eyebrowSkew, transformOrigin: "center top", ease: Power2.easeOut });
      TweenMax.to(elements.hair, 0.5, { x: hairX, scaleY: hairS, transformOrigin: "center bottom", ease: Power2.easeOut });

      document.body.removeChild(div);
    }

    function onEmailInput(e) {
      calculateFaceMove(e);
      const value = elements.email.value;
      curEmailIndex = value.length;

      if (curEmailIndex > 0) {
        if (mouthStatus === "small") {
          mouthStatus = "medium";
          TweenMax.to(elements.mouthBG, 0.5, { scaleX: 1.2, scaleY: 1.2, ease: Power2.easeOut });
          TweenMax.to([elements.eyeL, elements.eyeR], 0.5, { scaleX: 0.9, scaleY: 0.9, ease: Power2.easeOut });
          eyeScale = 0.9;
        }
        if (value.includes("@")) {
          mouthStatus = "large";
          TweenMax.to(elements.mouthBG, 0.5, { scaleX: 1.4, scaleY: 1.4, rotation: 5, ease: Power2.easeOut });
          TweenMax.to([elements.eyeL, elements.eyeR], 0.5, { scaleX: 0.8, scaleY: 0.8, ease: Power2.easeOut });
          eyeScale = 0.8;
        } else {
          mouthStatus = "medium";
          TweenMax.to(elements.mouthBG, 0.5, { scaleX: 1.2, scaleY: 1.2, rotation: 0, ease: Power2.easeOut });
          TweenMax.to([elements.eyeL, elements.eyeR], 0.5, { scaleX: 0.9, scaleY: 0.9, ease: Power2.easeOut });
          eyeScale = 0.9;
        }
      } else {
        mouthStatus = "small";
        TweenMax.to(elements.mouthBG, 0.5, { scaleX: 1, scaleY: 1, rotation: 0, ease: Power2.easeOut });
        TweenMax.to([elements.eyeL, elements.eyeR], 0.5, { scaleX: 1, scaleY: 1, ease: Power2.easeOut });
        eyeScale = 1;
      }

      // Bounce effect on input
      TweenMax.to(elements.mySVG, 0.2, { y: -5, ease: Power1.easeOut, yoyo: true, repeat: 1 });
    }

    function onEmailFocus(e) {
      activeElement = "email";
      e.target.parentElement.classList.add("focusWithText");
      onEmailInput(e);
    }

    function onEmailBlur(e) {
      activeElement = null;
      setTimeout(() => {
        if (activeElement !== "email" && e.target.value === "") {
          e.target.parentElement.classList.remove("focusWithText");
          resetFace();
        }
      }, 100);
    }

    function onPasswordFocus() {
      activeElement = "password";
      if (!eyesCovered) {
        coverEyes();
      }
      TweenMax.to(elements.mySVG, 0.2, { y: -5, ease: Power1.easeOut, yoyo: true, repeat: 1 });
    }

    function onPasswordBlur() {
      activeElement = null;
      setTimeout(() => {
        if (activeElement !== "password" && activeElement !== "toggle") {
          uncoverEyes();
        }
      }, 100);
    }

    function onPasswordToggleFocus() {
      activeElement = "toggle";
      if (!eyesCovered) {
        coverEyes();
      }
    }

    function onPasswordToggleBlur() {
      activeElement = null;
      if (!showPasswordClicked) {
        setTimeout(() => {
          if (activeElement !== "password" && activeElement !== "toggle") {
            uncoverEyes();
          }
        }, 100);
      }
    }

    function onPasswordToggleMouseDown() {
      showPasswordClicked = true;
    }

    function onPasswordToggleMouseUp() {
      showPasswordClicked = false;
    }

    function onPasswordToggleChange(e) {
      setTimeout(() => {
        elements.password.type = e.target.checked ? "text" : "password";
        e.target.checked ? spreadFingers() : closeFingers();
      }, 100);
    }

    function spreadFingers() {
      elements.twoFingers.forEach(finger => {
        TweenMax.to(finger, 0.35, { transformOrigin: finger.classList.contains('armL') ? "bottom left" : "bottom right", rotation: finger.classList.contains('armL') ? 20 : -20, x: finger.classList.contains('armL') ? -6 : 6, y: -2, ease: Power2.easeInOut });
      });
    }

    function closeFingers() {
      elements.twoFingers.forEach(finger => {
        TweenMax.to(finger, 0.35, { transformOrigin: finger.classList.contains('armL') ? "bottom left" : "bottom right", rotation: 0, x: 0, y: 0, ease: Power2.easeInOut });
      });
    }

    function coverEyes() {
      TweenMax.killTweensOf([elements.armL, elements.armR]);
      TweenMax.set([elements.armL, elements.armR], { visibility: "visible" });
      TweenMax.to(elements.armL, 0.35, { x: -70, y: 5, rotation: 0, ease: Power2.easeOut });
      TweenMax.to(elements.armR, 0.35, { x: 70, y: 5, rotation: 0, ease: Power2.easeOut, delay: 0.1 });
      eyesCovered = true;
    }

    function uncoverEyes() {
      TweenMax.killTweensOf([elements.armL, elements.armR]);
      TweenMax.to(elements.armL, 0.8, { y: 150, ease: Power2.easeOut });
      TweenMax.to(elements.armL, 0.8, { rotation: 90, ease: Power2.easeOut, delay: 0.1 });
      TweenMax.to(elements.armR, 0.8, { y: 150, ease: Power2.easeOut });
      TweenMax.to(elements.armR, 0.8, { rotation: -90, ease: Power2.easeOut, delay: 0.1, onComplete: () => {
        TweenMax.set([elements.armL, elements.armR], { visibility: "hidden" });
      }});
      eyesCovered = false;
    }

    function resetFace() {
      TweenMax.to([elements.eyeL, elements.eyeR], 0.5, { x: 0, y: 0, ease: Power2.easeOut });
      TweenMax.to(elements.nose, 0.5, { x: 0, y: 0, scaleX: 1, scaleY: 1, ease: Power2.easeOut });
      TweenMax.to(elements.mouth, 0.5, { x: 0, y: 0, rotation: 0, ease: Power2.easeOut });
      TweenMax.to(elements.chin, 0.5, { x: 0, y: 0, scaleY: 1, ease: Power2.easeOut });
      TweenMax.to([elements.face, elements.eyebrow], 0.5, { x: 0, y: 0, skewX: 0, ease: Power2.easeOut });
      TweenMax.to(elements.hair, 0.5, { x: 0, scaleY: 1, ease: Power2.easeOut });
    }

    function startBlinking(delay = 1) {
      blinking = TweenMax.to([elements.eyeL, elements.eyeR], 0.1, {
        delay: getRandomInt(delay),
        scaleY: 0,
        yoyo: true,
        repeat: 1,
        transformOrigin: "center center",
        onComplete: () => startBlinking(10)
      });
    }

    function stopBlinking() {
      if (blinking) {
        blinking.kill();
        blinking = null;
        TweenMax.set([elements.eyeL, elements.eyeR], { scaleY: eyeScale });
      }
    }

    function getRandomInt(max) {
      return Math.floor(Math.random() * max);
    }

    function getAngle(x1, y1, x2, y2) {
      return Math.atan2(y1 - y2, x1 - x2);
    }

    function getPosition(el) {
      let xPos = 0, yPos = 0;
      while (el) {
        if (el.tagName === "BODY") {
          const xScroll = el.scrollLeft || document.documentElement.scrollLeft;
          const yScroll = el.scrollTop || document.documentElement.scrollTop;
          xPos += (el.offsetLeft - xScroll + el.clientLeft);
          yPos += (el.offsetTop - yScroll + el.clientTop);
        } else {
          xPos += (el.offsetLeft - el.scrollLeft + el.clientLeft);
          yPos += (el.offsetTop - el.scrollTop + el.clientTop);
        }
        el = el.offsetParent;
      }
      return { x: xPos, y: yPos };
    }

    function isMobileDevice() {
      return /android|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());
    }

    function initLoginForm() {
      svgCoords = getPosition(elements.mySVG);
      emailCoords = getPosition(elements.email);
      screenCenter = svgCoords.x + (elements.mySVG.offsetWidth / 2);
      eyeLCoords = { x: svgCoords.x + 84, y: svgCoords.y + 76 };
      eyeRCoords = { x: svgCoords.x + 113, y: svgCoords.y + 76 };
      noseCoords = { x: svgCoords.x + 97, y: svgCoords.y + 81 };
      mouthCoords = { x: svgCoords.x + 100, y: svgCoords.y + 100 };
      emailScrollMax = elements.email.scrollWidth;

      elements.email.addEventListener('focus', onEmailFocus);
      elements.email.addEventListener('blur', onEmailBlur);
      elements.email.addEventListener('input', onEmailInput);
      elements.emailLabel.addEventListener('click', () => {
        activeElement = "email";
        elements.email.focus();
      });

      elements.password.addEventListener('focus', onPasswordFocus);
      elements.password.addEventListener('blur', onPasswordBlur);

      elements.showPasswordCheck.addEventListener('change', onPasswordToggleChange);
      elements.showPasswordCheck.addEventListener('focus', onPasswordToggleFocus);
      elements.showPasswordCheck.addEventListener('blur', onPasswordToggleBlur);
      elements.showPasswordToggle.addEventListener('mousedown', onPasswordToggleMouseDown);
      elements.showPasswordToggle.addEventListener('mouseup', onPasswordToggleMouseUp);
      elements.showPasswordToggle.addEventListener('click', () => elements.showPasswordCheck.focus());

      TweenMax.set(elements.armL, { x: -70, y: 150, rotation: 90, transformOrigin: "top left" });
      TweenMax.set(elements.armR, { x: 70, y: 150, rotation: -90, transformOrigin: "top right" });
      TweenMax.set(elements.mouth, { transformOrigin: "center center" });

      startBlinking(5);

      if (isMobileDevice()) {
        elements.password.type = "text";
        elements.showPasswordCheck.checked = true;
        spreadFingers();
      }
    }

    initLoginForm();
  </script>
</body>
</html>